<div class="h-screen bg-white flex overflow-hidden">

  <!-- Overlay mobile -->
  <div 
    *ngIf="isSidebarOpen"
    class="fixed inset-0 bg-black/40 z-40 lg:hidden"
    (click)="closeSidebarOverlay()">
  </div>

  <!-- Sidebar -->
  <div [class]="'fixed lg:relative z-50 lg:z-auto h-full w-80 bg-white border-r border-slate-200 transform transition-all duration-500 ease-out shadow-lg ' + 
    (isSidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0')">

    <!-- Sidebar Header -->
    <div class="p-6 border-b border-slate-200 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-indigo-600 text-white rounded-lg flex items-center justify-center font-bold">
          FH
        </div>
        <div>
          <span class="font-bold text-slate-800 text-lg">FinanceHub</span><br>
          <span class="text-sm text-slate-500">Gestion intelligente</span>
        </div>
      </div>
      <button
        class="lg:hidden text-slate-600 hover:bg-slate-100 p-2 rounded-lg"
        (click)="toggleSidebar()">
        âœ•
      </button>
    </div>

    <!-- Navigation -->
    <nav class="p-6 space-y-3 overflow-y-auto flex-1">

      <!-- Transactions -->
      <div>
        <button 
          class="w-full flex items-center justify-between p-3 rounded-lg text-slate-800 hover:bg-slate-100"
          (click)="toggleSubMenu('transactions')">
          ðŸ’¸ Transactions
          <span [class.rotate-90]="subMenuOpen['transactions']" class="transition-transform">â–¶</span>
        </button>
        <div *ngIf="subMenuOpen['transactions']" class="ml-4 mt-2 space-y-1">
          <a routerLink="/transactions" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">Liste</a>
          <a routerLink="/transactionsArgentaire/depot" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">DÃ©poser</a>
          <a routerLink="/transactionsRetrait/retrait" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">Retirer</a>
          <a routerLink="transactionsTransfert/transfert" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">Transfert</a>
        </div>
      </div>

      <!-- Abonnements -->
      <div>
        <button 
          class="w-full flex items-center justify-between p-3 rounded-lg text-slate-800 hover:bg-slate-100"
          (click)="toggleSubMenu('abonnements')">
          ðŸ“ƒ Abonnements
          <span [class.rotate-90]="subMenuOpen['abonnements']" class="transition-transform">â–¶</span>
        </button>
        <div *ngIf="subMenuOpen['abonnements']" class="ml-4 mt-2 space-y-1">
          <a routerLink="/abonnements" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">Liste</a>
          <a routerLink="/abonnements/activer" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">Activer</a>
          <a routerLink="/abonnements/actifs" class="block px-3 py-2 text-slate-700 rounded hover:bg-slate-100">Actifs</a>
        </div>
      </div>

      <!-- Profil -->
      <a routerLink="/profil" class="block p-3 rounded-lg text-slate-800 hover:bg-slate-100">
        ðŸ‘¤ Profil
      </a>
    </nav>

    <!-- DÃ©connexion -->
    <div class="p-6 border-t border-slate-200">
      <button (click)="logout()" 
        class="w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-red-500 text-white hover:bg-red-600">
        ðŸšª DÃ©connexion
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex-1 flex flex-col min-w-0">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 shadow-sm">
      <div class="flex items-center justify-between p-4 lg:px-8">
        
        <!-- Left -->
        <div class="flex items-center gap-4">
          <button class="lg:hidden p-3 rounded-lg hover:bg-slate-100 border border-slate-200" (click)="toggleSidebar()">
            â˜°
          </button>
          <input type="search" placeholder="Rechercher..." 
                 class="w-64 px-3 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none">
        </div>

        <!-- Right -->
        <div class="flex items-center gap-4">
          <button class="p-3 hover:bg-slate-100 rounded-lg border border-slate-200 relative">
            ðŸ””
            <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 text-xs text-white rounded-full flex items-center justify-center">3</span>
          </button>
          <div class="w-10 h-10 bg-indigo-600 text-white rounded-lg flex items-center justify-center font-bold cursor-pointer">
            AM
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 p-6 lg:p-8 overflow-auto">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
